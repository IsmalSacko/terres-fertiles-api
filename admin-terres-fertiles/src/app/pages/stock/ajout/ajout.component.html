
<div class="container">
    <h2 class="edit-stock-title">
        <mat-icon>edit</mat-icon>
        Modifier le stock
    </h2>
    <form [formGroup]="stockForm" (ngSubmit)="onSubmit()">
        <mat-form-field appearance="outline" class="full-width">
        <mat-label>Mélanges</mat-label>
        <mat-select formControlName="nom_melange" required>
            @if (melanges) {
                @for(m of melanges; track m.id) {
                    <mat-option [value]="m.id">{{ m.nom }}</mat-option>
                }
            }@else {
                <p>Aucun mélange disponible</p>
            }
        </mat-select>
        </mat-form-field>

        <mat-form-field appearance="outline" class="full-width">
            <mat-label>Volume</mat-label>
            <input matInput formControlName="volume" required placeholder="Volume du mélange en m³" type="number"
                min="0" step="0.01">
            <mat-error *ngIf="stockForm.get('volume')?.hasError('required')">Le volume
                est obligatoire</mat-error>
        </mat-form-field>
        <mat-form-field appearance="outline" class="full-width">
            <mat-label>État de stock</mat-label>
            <mat-select formControlName="etat_stock" required>
                <mat-option value="maturation">Maturation</mat-option>
                <mat-option value="disponible">Disponible</mat-option>
                <mat-option value="vendu">Vendu</mat-option>
            </mat-select>
            <mat-error *ngIf="stockForm.get('etat_stock')?.hasError('required')">L'état de stock est
                obligatoire</mat-error>
        </mat-form-field>
        

        <button mat-raised-button color="primary" type="submit">
            Enregistrer
        </button>
        <button mat-button type="button" (click)="goBack()">Annuler</button>
    </form>
</div>