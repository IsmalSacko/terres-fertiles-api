

 @if (loadingGlobal) {
    <div class="list-edit-spinner-container">
      <mat-spinner diameter="48" color="primary"></mat-spinner>
      <span class="list-edit-spinner-text">Chargement en cours...</span>
    </div>
  }
<div class="dashboard-component full-page-background">
  <!-- En-tête moderne avec notifications -->
  <div class="dashboard-header">
    <div class="header-main">
      <h1 class="dashboard-title">
        <mat-icon class="title-icon">dashboard</mat-icon>
        Tableau de bord
      </h1>
      <p class="dashboard-subtitle">Gestion moderne Terres Fertiles</p>
    </div>

    <!-- Barre de notifications statistiques -->
    <div class="notifications-bar">
      <div class="notification-item chantier-notification" [routerLink]="['/chantiers']">
        <div class="notification-icon">
          <mat-icon>construction</mat-icon>
          <span class="notification-badge">{{ chantierActifs }}</span>
        </div>
        <div class="notification-content">
          <span class="notification-title">Chantiers</span>
          <span class="notification-subtitle">actifs</span>
        </div>
      </div>

      <div class="notification-item gisement-notification" [routerLink]="['/gisements']">
        <div class="notification-icon">
          <mat-icon>terrain</mat-icon>
          <span class="notification-badge">{{ gisements }}</span>
        </div>
        <div class="notification-content">
          <span class="notification-title">Gisements</span>
          <span class="notification-subtitle">disponibles</span>
        </div>
      </div>

      <div class="notification-item melange-notification" [routerLink]="['/melanges']">
        <div class="notification-icon">
          <mat-icon>blender</mat-icon>
          <span class="notification-badge">{{ melanges }}</span>
        </div>
        <div class="notification-content">
          <span class="notification-title">Mélanges</span>
          <span class="notification-subtitle">créés</span>
        </div>
      </div>

      <div class="notification-item planning-notification" [routerLink]="['/planning']">
        <div class="notification-icon">
          <mat-icon>schedule</mat-icon>
          <span class="notification-badge">{{ plannings }}</span>
        </div>
        <div class="notification-content">
          <span class="notification-title">Plannings</span>
          <span class="notification-subtitle">actifs</span>
        </div>
      </div>

      <div class="notification-item produit-notification" [routerLink]="['/produits']">
        <div class="notification-icon">
          <mat-icon>inventory</mat-icon>
          <span class="notification-badge">{{ produitVente }}</span>
        </div>
        <div class="notification-content">
          <span class="notification-title">Produits</span>
          <span class="notification-subtitle">en vente</span>
        </div>
      </div>

      <div class="notification-item vente-notification" [routerLink]="['/saisies-vente']">
        <div class="notification-icon">
          <mat-icon>receipt_long</mat-icon>
          <span class="notification-badge">{{ saisiesVente }}</span>
        </div>
        <div class="notification-content">
          <span class="notification-title">Fiches</span>
          <span class="notification-subtitle">de vente</span>
        </div>
      </div>
    </div>
  </div>

  <!-- Conteneur principal -->
  <div class="dashboard-container py-4">

    <!-- Grille des cartes principales -->
    <div class="dashboard-grid">
      
      <!-- Carte Chantiers -->
      <div class="modern-card card-chantiers" routerLink="/chantiers">
        <div class="card-icon">
          <mat-icon>construction</mat-icon>
        </div>
        <h3 class="card-title">Gestion des Chantiers</h3>
        <p class="card-description">
          Suivez et gérez tous vos chantiers en cours. Planification, ressources et équipes.
        </p>
        <button class="card-action">Accéder aux chantiers</button>
      </div>

      <!-- Carte Gisements -->
      <div class="modern-card card-gisements" routerLink="/gisements">
        <div class="card-icon">
          <mat-icon>terrain</mat-icon>
        </div>
        <h3 class="card-title">Gisements</h3>
        <p class="card-description">
          Explorez et gérez vos sources de matières premières organiques disponibles.
        </p>
        <button class="card-action">Voir les gisements</button>
      </div>

      <!-- Carte Mélanges -->
      <div class="modern-card card-melanges" routerLink="/melanges">
        <div class="card-icon">
          <mat-icon>blender</mat-icon>
        </div>
        <h3 class="card-title">Mélanges</h3>
        <p class="card-description">
          Créez et optimisez vos formulations d'amendements organiques personnalisés.
        </p>
        <button class="card-action">Gérer les mélanges</button>
      </div>

      <!-- Carte Planning -->
      <div class="modern-card card-planning" routerLink="/planning">
        <div class="card-icon">
          <mat-icon>calendar_today</mat-icon>
        </div>
        <h3 class="card-title">Planning</h3>
        <p class="card-description">
          Organisez et planifiez vos activités de production et de livraison.
        </p>
        <button class="card-action">Ouvrir le planning</button>
      </div>

      <!-- Carte Vente -->
      <div class="modern-card card-vente" routerLink="/produits">
        <div class="card-icon">
          <mat-icon>shopping_cart</mat-icon>
        </div>
        <h3 class="card-title">Produits & Vente</h3>
        <p class="card-description">
          Gérez votre catalogue de produits et suivez vos ventes.
        </p>
        <button class="card-action">Accéder aux produits</button>
      </div>

      <!-- Carte Saisies de Vente -->
      <div class="modern-card card-saisies-vente" routerLink="/saisies-vente">
        <div class="card-icon">
          <mat-icon>receipt_long</mat-icon>
        </div>
        <h3 class="card-title">Fiches de Vente</h3>
        <p class="card-description">
          Consultez et gérez toutes vos saisies de vente avec validation.
        </p>
        <button class="card-action">Voir les fiches</button>
      </div>
    </div>
  </div>
</div>
