<div class="reset-bg">
  <div class="reset-container reset-card max-w-md mx-auto p-4">
    <div class="reset-icon">
      <!-- Icône cadenas SVG animée -->
      <svg width="48" height="48" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
        <g>
          <rect x="12" y="20" width="24" height="18" rx="5" fill="#388e3c" fill-opacity="0.13"/>
          <rect x="12" y="20" width="24" height="18" rx="5" stroke="#388e3c" stroke-width="2.5"/>
          <path d="M16 20v-4a8 8 0 1 1 16 0v4" stroke="#43a047" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"/>
          <circle class="lock-dot" cx="24" cy="30" r="2.5" fill="#43a047">
            <animate attributeName="r" values="2.5;4;2.5" dur="1.2s" repeatCount="indefinite"/>
          </circle>
        </g>
      </svg>
    </div>
    <h2 class="reset-title">Réinitialisation du mot de passe</h2>
    <p class="reset-message">Choisissez un nouveau mot de passe pour votre compte.</p>

    <form [formGroup]="form" (ngSubmit)="onSubmit()">
      <div class="reset-field">
        <label>Nouveau mot de passe</label>
        <div class="password-input-wrapper">
          <input
            [type]="hideNewPassword ? 'password' : 'text'"
            formControlName="new_password"
          />
          <button type="button" class="toggle-password-btn" (click)="toggleNewPasswordVisibility()" tabindex="-1">
            <span *ngIf="hideNewPassword">👁️</span>
            <span *ngIf="!hideNewPassword">🙈</span>
          </button>
        </div>
      </div>

      <div class="reset-field">
        <label>Confirmation du mot de passe</label>
        <div class="password-input-wrapper">
          <input
            [type]="hideConfirmPassword ? 'password' : 'text'"
            formControlName="confirm_password"
          />
          <button type="button" class="toggle-password-btn" (click)="toggleConfirmPasswordVisibility()" tabindex="-1">
            <span *ngIf="hideConfirmPassword">👁️</span>
            <span *ngIf="!hideConfirmPassword">🙈</span>
          </button>
        </div>
      </div>

      <button
        type="submit"
        [disabled]="form.invalid || loading"
        class="reset-btn"
      >
        <span *ngIf="!loading">Réinitialiser</span>
        <span *ngIf="loading" class="spinner" aria-label="Chargement..."></span>
      </button>
    </form>

    <div *ngIf="successMessage" class="reset-success">{{ successMessage }}</div>
    <div *ngIf="errorMessage" class="reset-error">{{ errorMessage }}</div>
  </div>
</div>
  
